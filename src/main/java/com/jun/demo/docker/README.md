@[TOC](目录)
# Docker 笔记
## 一、Docker 简介
- 是什么：
    - 一次封装，多处运行，解决运行环境和配置问题软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术
- 能干嘛：
    - 之前的虚拟机技术
    - 容器虚拟化技术
    - 开发/运维（DevOps）：开发自运维
        - 更快速的应用交付和部署
        - 更快速的升级 和 扩缩容
        - 更快速的系统运维
        - 更高效的计算资源利用
    - 企业级
- 去哪下
## 二、Docker 安装
- Docker基本组成
    - 镜像image
    - 容器 container：用镜像创建的运行实例
    - 仓库 repository
## 三、Docker常用命令
## 四、Docker镜像
- 是什么
    - Docker镜像加载原理
        - docker的镜像实际上由一层层的文件系统组成，这种层级的文件系统 UnionFS
        - bootfs（boot file system）只要包含bootloader和kernel，bootloader主要是引导加载kernel，Linux刚启动时会加载bootfs文件系统，
        在Docker镜像的最底层是bootfs。这一层和Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，
        此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。
        - rootfs（root file system）在bootfs之上，包含的就是经典Linux系统中的/dev /proc /bin /etc等标准目录和文件。rootfs就是各种不同
        的操作系统发行版本，如Ubuntu、CentOS等等
        ![](./image/UnionFS.png)
        - 最大的好处： 共享资源
            有多个镜像都是从同一个base镜像构建，那么宿主机只要在磁盘上保存一份base镜像，同时内存中也只要加载一份base镜像，就可以给所有容器服务了。
            而且镜像的每一层都可以共享
- 特点
    Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部。这一层通常被称作“容器层”,容器层之下的都是“镜像层”。
## 五、Docker 容器数据卷（Docker容器中的数据持久化（保存下来））
- 背景：
    - 将运用与运行的环境打包成容器运行，运行可以伴随容器，但是我们对数据的要求希望是持久化的
    - 容器之间希望有可能共享数据
    Docker容器产生的数据，如果不通过docker commit 生成新的镜像，使得数据做成镜像的一部分保存下来，那么容器删除后数据就没了
    为了能保存数据在docker中使用 数据卷（类似Redis中的 rdb和aof文件）
- 能干嘛
      卷就是目录或文件，存在于一个或多个容器中，由docker挂载到容器，但不属于UnionFS，因此能绕过UnionFS提供一些用于持久储存或共享数据的特性，
      卷的设计目的就是数据的持久化，完全独立于容器的生存周期，因此Docker不会在容器删除时删除其挂载的数据卷
      - 特点
        1. 数据卷可在容器之间共享或重用数据
        2. 卷中的更改可以直接生效
        3. 卷中的更改不会包含在镜像的更新中
        4. 卷的生命周期一直持续到没有容器使用为止 
## 六、DockerFile解析
## 七、Docker常用安装
## 八、本地镜像发布到阿里云